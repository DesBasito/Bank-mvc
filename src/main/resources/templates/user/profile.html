<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile - Bank Cards</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    .navbar {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .card-visual {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 15px;
      color: white;
      padding: 2rem;
      position: relative;
      overflow: hidden;
      min-height: 200px;
    }
    .card-visual::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
    }
    .card-number {
      font-family: 'Courier New', monospace;
      font-size: 1.2rem;
      font-weight: bold;
      letter-spacing: 2px;
    }
    .card-balance {
      font-size: 1.8rem;
      font-weight: bold;
    }
    .card-item {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .card-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    .filter-section {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .status-badge {
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
    }
    .info-card {
      border-left: 4px solid #007bff;
      transition: all 0.3s ease;
    }
    .info-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .btn-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
    }
    .btn-gradient:hover {
      background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
      color: white;
    }
    .main-content {
      margin-top: 80px;
    }
  </style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">
      <i class="fas fa-university me-2"></i>Bank Cards
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link active" href="#"><i class="fas fa-user me-1"></i>Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="user-applications.html"><i class="fas fa-file-alt me-1"></i>Applications</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="user-transactions.html"><i class="fas fa-history me-1"></i>Transactions</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="user-transfer.html"><i class="fas fa-exchange-alt me-1"></i>Transfer</a>
        </li>
      </ul>
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
            <i class="fas fa-user-circle me-1"></i>John Doe
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Main Content -->
<div class="container main-content">
  <!-- Page Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h2><i class="fas fa-credit-card me-2"></i>My Cards Portfolio</h2>
          <p class="text-muted">Manage your bank cards, apply for new ones, and request blocking</p>
        </div>
        <button class="btn btn-gradient btn-lg" data-bs-toggle="modal" data-bs-target="#newCardModal">
          <i class="fas fa-plus me-2"></i>Apply for New Card
        </button>
      </div>
    </div>
  </div>

  <!-- Quick Stats -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card info-card">
        <div class="card-body text-center">
          <i class="fas fa-credit-card fa-2x text-primary mb-2"></i>
          <h5 class="card-title">Total Cards</h5>
          <h3 class="text-primary" id="totalCardsCount">3</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card info-card">
        <div class="card-body text-center">
          <i class="fas fa-dollar-sign fa-2x text-success mb-2"></i>
          <h5 class="card-title">Total Balance</h5>
          <h3 class="text-success" id="totalBalance">$12,450.00</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card info-card">
        <div class="card-body text-center">
          <i class="fas fa-check-circle fa-2x text-info mb-2"></i>
          <h5 class="card-title">Active Cards</h5>
          <h3 class="text-info" id="activeCardsCount">2</h3>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card info-card">
        <div class="card-body text-center">
          <i class="fas fa-exchange-alt fa-2x text-warning mb-2"></i>
          <h5 class="card-title">This Month</h5>
          <h3 class="text-warning" id="monthlyTransactions">24</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- Filters and Sorting -->
  <div class="filter-section">
    <div class="row">
      <div class="col-md-3">
        <label class="form-label fw-bold">Filter by Status</label>
        <select class="form-select" id="statusFilter" onchange="filterCards()">
          <option value="">All Status</option>
          <option value="ACTIVE">Active</option>
          <option value="BLOCKED">Blocked</option>
          <option value="EXPIRED">Expired</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-bold">Filter by Type</label>
        <select class="form-select" id="typeFilter" onchange="filterCards()">
          <option value="">All Types</option>
          <option value="DEBIT">Debit</option>
          <option value="CREDIT">Credit</option>
          <option value="VIRTUAL">Virtual</option>
          <option value="PREPAID">Prepaid</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-bold">Sort by</label>
        <select class="form-select" id="sortBy" onchange="sortCards()">
          <option value="created_desc">Date Created (Newest)</option>
          <option value="created_asc">Date Created (Oldest)</option>
          <option value="balance_desc">Balance (High to Low)</option>
          <option value="balance_asc">Balance (Low to High)</option>
          <option value="type">Card Type</option>
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-bold">Search</label>
        <input type="text" class="form-control" id="searchCards" placeholder="Search card number..." onkeyup="searchCards()">
      </div>
    </div>
  </div>

  <!-- Cards Grid -->
  <div class="row" id="cardsContainer">
    <!-- Card 1 -->
    <div class="col-md-6 col-lg-4 mb-4 card-item" data-status="ACTIVE" data-type="DEBIT" data-balance="5000" data-created="2024-01-15">
      <div class="card h-100">
        <div class="card-visual position-relative">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
              <small class="opacity-75">DEBIT CARD</small>
              <div class="card-number">•••• •••• •••• 1234</div>
            </div>
            <span class="badge bg-success status-badge">ACTIVE</span>
          </div>
          <div class="d-flex justify-content-between align-items-end">
            <div>
              <small class="opacity-75">Balance</small>
              <div class="card-balance">$5,000.00</div>
            </div>
            <div class="text-end">
              <small class="opacity-75">Expires</small>
              <div>12/27</div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="text-muted">Created: Jan 15, 2024</span>
            <i class="fab fa-cc-visa fa-lg text-primary"></i>
          </div>
          <div class="btn-group w-100" role="group">
            <button class="btn btn-outline-danger btn-sm" onclick="requestCardBlock(1)">
              <i class="fas fa-ban me-1"></i>Block
            </button>
            <button class="btn btn-outline-info btn-sm" onclick="viewCardDetails(1)">
              <i class="fas fa-eye me-1"></i>Details
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="col-md-6 col-lg-4 mb-4 card-item" data-status="ACTIVE" data-type="CREDIT" data-balance="7450" data-created="2023-11-20">
      <div class="card h-100">
        <div class="card-visual position-relative" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
              <small class="opacity-75">CREDIT CARD</small>
              <div class="card-number">•••• •••• •••• 5678</div>
            </div>
            <span class="badge bg-success status-badge">ACTIVE</span>
          </div>
          <div class="d-flex justify-content-between align-items-end">
            <div>
              <small class="opacity-75">Available</small>
              <div class="card-balance">$7,450.00</div>
            </div>
            <div class="text-end">
              <small class="opacity-75">Expires</small>
              <div>08/28</div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="text-muted">Created: Nov 20, 2023</span>
            <i class="fab fa-cc-mastercard fa-lg text-warning"></i>
          </div>
          <div class="btn-group w-100" role="group">
            <button class="btn btn-outline-danger btn-sm" onclick="requestCardBlock(2)">
              <i class="fas fa-ban me-1"></i>Block
            </button>
            <button class="btn btn-outline-info btn-sm" onclick="viewCardDetails(2)">
              <i class="fas fa-eye me-1"></i>Details
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Card 3 - Blocked -->
    <div class="col-md-6 col-lg-4 mb-4 card-item" data-status="BLOCKED" data-type="VIRTUAL" data-balance="0" data-created="2024-03-10">
      <div class="card h-100">
        <div class="card-visual position-relative" style="background: linear-gradient(135deg, #757575 0%, #424242 100%);">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
              <small class="opacity-75">VIRTUAL CARD</small>
              <div class="card-number">•••• •••• •••• 9012</div>
            </div>
            <span class="badge bg-danger status-badge">BLOCKED</span>
          </div>
          <div class="d-flex justify-content-between align-items-end">
            <div>
              <small class="opacity-75">Balance</small>
              <div class="card-balance">$0.00</div>
            </div>
            <div class="text-end">
              <small class="opacity-75">Expires</small>
              <div>06/26</div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span class="text-muted">Created: Mar 10, 2024</span>
            <span class="badge bg-secondary">VIRTUAL</span>
          </div>
          <div class="text-center">
            <button class="btn btn-outline-secondary btn-sm" disabled>
              <i class="fas fa-ban me-1"></i>Card Blocked
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Cards Found Message -->
  <div class="row" id="noCardsMessage" style="display: none;">
    <div class="col-12">
      <div class="text-center py-5">
        <i class="fas fa-credit-card fa-4x text-muted mb-3"></i>
        <h4 class="text-muted">No cards found</h4>
        <p class="text-muted">Try adjusting your filters or apply for a new card.</p>
      </div>
    </div>
  </div>
</div>

<!-- New Card Application Modal -->
<div class="modal fade" id="newCardModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-plus me-2"></i>Apply for New Card</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="newCardForm">
          <div class="mb-3">
            <label class="form-label fw-bold">Card Type</label>
            <select class="form-select" id="cardType" required>
              <option value="">Select card type</option>
              <option value="DEBIT">Debit Card</option>
              <option value="CREDIT">Credit Card</option>
              <option value="VIRTUAL">Virtual Card</option>
              <option value="PREPAID">Prepaid Card</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label fw-bold">Reason for Application</label>
            <textarea class="form-control" id="applicationReason" rows="3" placeholder="Please describe why you need this card..."></textarea>
          </div>
          <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            Your application will be reviewed by our team. You'll receive a notification once it's processed.
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-gradient" onclick="submitCardApplication()">Submit Application</button>
      </div>
    </div>
  </div>
</div>

<!-- Block Card Modal -->
<div class="modal fade" id="blockCardModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-ban me-2"></i>Block Card Request</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="blockCardForm">
          <div class="mb-3">
            <label class="form-label fw-bold">Card Number</label>
            <input type="text" class="form-control" id="blockCardNumber" readonly>
          </div>
          <div class="mb-3">
            <label class="form-label fw-bold">Reason for Blocking</label>
            <select class="form-select" id="blockReason" required>
              <option value="">Select reason</option>
              <option value="LOST">Lost Card</option>
              <option value="STOLEN">Stolen Card</option>
              <option value="COMPROMISED">Security Compromised</option>
              <option value="SUSPICIOUS">Suspicious Activity</option>
              <option value="OTHER">Other</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label fw-bold">Additional Details</label>
            <textarea class="form-control" id="blockDetails" rows="3" placeholder="Please provide additional details..."></textarea>
          </div>
          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            Once blocked, you won't be able to use this card until it's unblocked by an administrator.
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" onclick="submitBlockRequest()">Block Card</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
  // Sample data for demonstration
  let allCards = [];
  let currentBlockCardId = null;

  // Initialize page
  document.addEventListener('DOMContentLoaded', function() {
    loadCards();
  });

  // Load cards from API
  function loadCards() {
    // This would typically be an API call
    // For demo purposes, we'll use the cards already in DOM
    updateStats();
  }

  // Update statistics
  function updateStats() {
    const cards = document.querySelectorAll('.card-item');
    const activeCards = document.querySelectorAll('.card-item[data-status="ACTIVE"]');

    document.getElementById('totalCardsCount').textContent = cards.length;
    document.getElementById('activeCardsCount').textContent = activeCards.length;

    // Calculate total balance
    let totalBalance = 0;
    cards.forEach(card => {
      totalBalance += parseFloat(card.dataset.balance || 0);
    });
    document.getElementById('totalBalance').textContent = `$${totalBalance.toLocaleString()}.00`;
  }

  // Filter cards by status and type
  function filterCards() {
    const statusFilter = document.getElementById('statusFilter').value;
    const typeFilter = document.getElementById('typeFilter').value;
    const searchTerm = document.getElementById('searchCards').value.toLowerCase();

    const cards = document.querySelectorAll('.card-item');
    let visibleCount = 0;

    cards.forEach(card => {
      const cardStatus = card.dataset.status;
      const cardType = card.dataset.type;
      const cardNumber = card.querySelector('.card-number').textContent.toLowerCase();

      const statusMatch = !statusFilter || cardStatus === statusFilter;
      const typeMatch = !typeFilter || cardType === typeFilter;
      const searchMatch = !searchTerm || cardNumber.includes(searchTerm);

      if (statusMatch && typeMatch && searchMatch) {
        card.style.display = 'block';
        visibleCount++;
      } else {
        card.style.display = 'none';
      }
    });

    // Show/hide no cards message
    document.getElementById('noCardsMessage').style.display = visibleCount === 0 ? 'block' : 'none';
  }

  // Search cards
  function searchCards() {
    filterCards();
  }

  // Sort cards
  function sortCards() {
    const sortBy = document.getElementById('sortBy').value;
    const container = document.getElementById('cardsContainer');
    const cards = Array.from(document.querySelectorAll('.card-item'));

    cards.sort((a, b) => {
      switch(sortBy) {
        case 'created_desc':
          return new Date(b.dataset.created) - new Date(a.dataset.created);
        case 'created_asc':
          return new Date(a.dataset.created) - new Date(b.dataset.created);
        case 'balance_desc':
          return parseFloat(b.dataset.balance) - parseFloat(a.dataset.balance);
        case 'balance_asc':
          return parseFloat(a.dataset.balance) - parseFloat(b.dataset.balance);
        case 'type':
          return a.dataset.type.localeCompare(b.dataset.type);
        default:
          return 0;
      }
    });

    // Re-append sorted cards
    cards.forEach(card => container.appendChild(card));
  }

  // Submit new card application
  function submitCardApplication() {
    const cardType = document.getElementById('cardType').value;
    const reason = document.getElementById('applicationReason').value;

    if (!cardType) {
      alert('Please select a card type');
      return;
    }

    // Here you would make an API call to submit the application
    console.log('Submitting card application:', { cardType, reason });

    // For demo purposes, show success message
    alert('Card application submitted successfully! You will receive a notification once it\'s processed.');

    // Close modal and reset form
    const modal = bootstrap.Modal.getInstance(document.getElementById('newCardModal'));
    modal.hide();
    document.getElementById('newCardForm').reset();
  }

  // Request card block
  function requestCardBlock(cardId) {
    currentBlockCardId = cardId;

    // Find card info
    const cardElement = document.querySelector(`.card-item:nth-child(${cardId})`);
    const cardNumber = cardElement.querySelector('.card-number').textContent;

    document.getElementById('blockCardNumber').value = cardNumber;

    const modal = new bootstrap.Modal(document.getElementById('blockCardModal'));
    modal.show();
  }

  // Submit block request
  function submitBlockRequest() {
    const reason = document.getElementById('blockReason').value;
    const details = document.getElementById('blockDetails').value;

    if (!reason) {
      alert('Please select a reason for blocking');
      return;
    }

    // Here you would make an API call to submit the block request
    console.log('Submitting block request:', {
      cardId: currentBlockCardId,
      reason,
      details
    });

    // For demo purposes, show success message
    alert('Block request submitted successfully! An administrator will review your request.');

    // Close modal and reset form
    const modal = bootstrap.Modal.getInstance(document.getElementById('blockCardModal'));
    modal.hide();
    document.getElementById('blockCardForm').reset();
  }

  // View card details
  function viewCardDetails(cardId) {
    // This would redirect to a detailed card view or show a modal
    console.log('Viewing details for card:', cardId);
    alert('Card details functionality would be implemented here');
  }

  // Logout function
  function logout() {
    if (confirm('Are you sure you want to logout?')) {
      // Here you would handle logout logic
      window.location.href = '/login';
    }
  }
</script>
</body>
</html>